name: PR Title Validation

on:
  pull_request:
    types: [opened, edited, synchronize]

permissions:
  contents: read
  pull-requests: read
  statuses: write

jobs:
  validate-pr-title:
    name: validate-pr-title
    runs-on: ubuntu-latest
    steps:
      - name: Validate PR title
        run: |
          if [[ ! "${{ github.event.pull_request.title }}" =~ ^(feat|feature|fix|hotfix|bugfix|docs|refactor|test|chore|ci|build)(\(.+\))?!?:.+ ]]; then
            echo "PR title format is invalid"
            echo "Please edit your PR title here:"
            echo "https://github.com/${{ github.repository }}/pull/${{ github.event.pull_request.number }}"
            echo "Expected format: type(scope): description"
            echo "Allowed types: feat, feature, fix, hotfix, bugfix, docs, refactor, test, chore, ci, build"
            echo "Examples:"
            echo "  - feat: add new feature"
            echo "  - hotfix(api): urgent production patch"
            echo "  - bugfix: resolve login issue"
            echo "  - docs: update README"
            echo ""
            exit 1
          fi